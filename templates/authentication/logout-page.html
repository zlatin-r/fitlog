{% extends "base.html" %}

{% block title %}Logout{% endblock %}

{% block content %}
<div class="auth-container">
    <h2>Are you sure you want to log out?</h2>
    <button id="logout-button" class="btn">Logout</button>
</div>

<script>
    document.getElementById("logout-button").addEventListener("click", async function() {
        const refresh_token = localStorage.getItem("refresh_token");

        const response = await fetch("/auth/logout/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ refresh: refresh_token })
        });

        if (response.ok) {
            localStorage.removeItem("access_token");
            localStorage.removeItem("refresh_token");
            alert("Logout successful!");
            window.location.href = "/login/";
        } else {
            alert("Error logging out");
        }
    });
</script>
{% endblock %}
